(self.webpackChunk=self.webpackChunk||[]).push([[501],{4101:(t,e,n)=>{"use strict";function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:()=>o});const o={data:function(){return{waitFor:""}},computed:a(a({},(0,n(629).Se)(["isInLoading"])),{},{isLoading:function(){return this.isInLoading(this.waitFor)}}),methods:{startLoading:function(){this.$store.dispatch("startLoadingBy",this.waitFor)},stopLoading:function(){this.$store.dispatch("stopLoadingBy",this.waitFor)}}}},928:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},5504:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const s={props:{dialog:{type:Boolean,required:!0},width:{type:[String,Number],required:!0}},data:function(){return{dialogWidth:"".concat(this.width,"px")}}};const a=(0,n(1900).Z)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{persistent:"","max-width":t.dialogWidth},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[t._t("default")],2)],1)}),[],!1,null,null,null).exports},2584:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});const s=(0,n(1900).Z)({},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-card-text",[t._t("default")],2)}),[],!1,null,null,null).exports},4697:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const s={props:{isLoading:{type:Boolean,required:!0}}};const a=(0,n(1900).Z)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card-actions",{staticClass:"pb-6 pr-6"},[n("v-spacer"),t._v(" "),n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],attrs:{indeterminate:""}}),t._v(" "),t._t("default")],2)}),[],!1,null,null,null).exports},2003:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});const s=(0,n(1900).Z)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card-title",[n("span",{staticClass:"title font-weight-light"},[t._t("default")],2)])}),[],!1,null,null,null).exports},3501:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>j});var s=n(629),a=n(8400),r=n(7525),o=n(928),i=n.n(o),l=n(4101),c=n(6231),u=n(9356),d=n(5504),v=n(2003),p=n(2584),_=n(4697);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const g={name:"DeleteTransactionModal",mixins:[l.Z],components:{Modal:d.Z,ModalHeading:v.Z,ModalBody:p.Z,ModalFooter:_.Z},data:function(){return{waitFor:"destroy_transaction",id:null}},computed:m({},(0,s.rn)(["showModal"])),mounted:function(){var t=this;document.addEventListener("keydown",(function(e){27==e.keyCode&&t.close()}))},methods:m(m({},(0,s.nv)(["destroyTransaction","setShowModal"])),{},{open:function(t){this.id=t,this.setShowModal(!0)},close:function(){this.id=null,this.setShowModal(!1)},submit:function(){var t=this;this.startLoading(),this.destroyTransaction(this.id).then((function(t){(0,r.IE)(t)})).catch((function(t){(0,r.O1)(t)})).finally((function(){t.stopLoading(),t.close()}))}})};var b=n(1900);const y=(0,b.Z)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{width:"360",dialog:t.showModal}},[n("modal-heading",[t._v("\n    "+t._s(t.$t("Delete Transaction"))+"\n  ")]),t._v(" "),n("modal-body",[n("div",{staticClass:"text-xs-center"},[t._v(t._s(t.$t("Are you sure you want to delete the last transaction?")))])]),t._v(" "),n("modal-footer",{attrs:{"is-loading":t.isLoading}},[n("v-btn",{staticClass:"btn-close",attrs:{disabled:t.isLoading},on:{click:t.close}},[t._v("\n      "+t._s(t.$t("Close"))+"\n    ")]),t._v(" "),n("v-btn",{staticClass:"btn-warning",attrs:{disabled:t.isLoading},on:{click:t.submit}},[t._v("\n      "+t._s(t.$t("Delete"))+"\n    ")])],1)],1)}),[],!1,null,null,null).exports;function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){x(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const k={props:{initialShare:{type:Object,required:!0}},name:"Share",mixins:[l.Z],components:{TransactionItem:c.Z,ItemDetail:u.Z,DeleteTransactionModal:y},data:function(){return{waitFor:"fetch_share_transactions",share:this.initialShare,itemDetails:a.iQ}},computed:w(w({},(0,s.Se)(["getPortfolioById"])),{},{createTransactionParams:function(){return{shareId:this.share.id,code:this.share.symbol.code,commission:this.getPortfolioById(this.share.portfolio_id).commission}}}),methods:w(w({},(0,s.nv)(["destroyShare"])),{},{count:function(){return this.share.transactions.length},lastTransaction:function(){return i()(this.share.transactions)},getTextColor:function(t){return-1==t?"red lighten-1":1==t?"green lighten-1":""},deleteShare:function(){var t=this;this.destroyShare({id:this.share.id,portfolio_id:this.share.portfolio_id}).then((function(e){(0,r.IE)(t.$t("Share has been successfully deleted from your portfolio.")),t.$router.push({name:"Home"})})).catch((function(t){(0,r.O1)(t)}))}})};const j=(0,b.Z)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoading?t._e():n("v-row",{attrs:{align:"center",justify:"center"}},[n("delete-transaction-modal",{ref:"deleteTransactionModal"}),t._v(" "),n("v-col",{attrs:{cols:"12",sm:"8",md:"4",lg:"10"}},[n("v-card",[n("v-toolbar",{staticClass:"pl-2",attrs:{flat:""}},[n("v-btn",{attrs:{icon:"",to:"/",exact:""}},[n("v-icon",{attrs:{color:"grey darken-2"}},[t._v("arrow_back")])],1),t._v(" "),n("v-toolbar-title",{staticClass:"pl-2"},[t._v(t._s(t.share.symbol.code))]),t._v(" "),n("v-subheader",[n("span",{staticClass:"pr-3 font-weight-thin"},[t._v(t._s(t.share.symbol.last_price))]),t._v(" "),n("v-chip",{staticClass:"font-weight-thin",attrs:{label:"",small:"",color:t.getTextColor(t.share.symbol.trend)}},[t._v("\n            "+t._s(t.share.symbol.rate_of_change)+"\n          ")])],1),t._v(" "),n("v-spacer"),t._v(" "),t.count()?t._e():n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[n("v-btn",{staticClass:"mx-1",attrs:{icon:"",small:""},on:{click:function(e){return t.deleteShare()}}},[n("v-icon",t._g({attrs:{color:"red darken-2"}},s),[t._v("delete")])],1)]}}],null,!1,4082410062)},[t._v(" "),n("span",[t._v(t._s(t.$t("Delete share from the portfolio")))])]),t._v(" "),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[t.count()&&5!=t.lastTransaction().type&&6!=t.lastTransaction().type?n("v-btn",{staticClass:"mx-1",attrs:{icon:"",small:""},on:{click:function(e){t.$refs.deleteTransactionModal.open(t.lastTransaction().id)}}},[n("v-icon",t._g({attrs:{small:"",color:"red darken-2"}},s),[t._v("backspace")])],1):t._e()]}}],null,!1,87595544)},[t._v(" "),n("span",[t._v(t._s(t.$t("Delete last item of transactions.")))])]),t._v(" "),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[n("v-btn",{staticClass:"mx-1",attrs:{icon:"",small:"",to:{name:"CreateTransaction",params:t.createTransactionParams}}},[n("v-icon",t._g({attrs:{color:"green darken-2"}},s),[t._v("add")])],1)]}}],null,!1,3327485705)},[t._v(" "),n("span",[t._v(t._s(t.$t("Add Transaction")))])])],1),t._v(" "),n("v-divider"),t._v(" "),n("v-card-text",[n("transaction-item",{attrs:{items:t.share.transactions}}),t._v(" "),n("div",{staticClass:"ma-4"},[n("v-icon",{attrs:{"x-small":"",dense:""}},[t._v("access_time")]),t._v(" "),n("span",{staticClass:"mx-1 caption font-weight-thin"},[t._v("SG: "+t._s(t.share.symbol.session_time))])],1)],1),t._v(" "),n("v-card-actions",{staticStyle:{"background-color":"#323639"}},[n("v-flex",{staticClass:"px-2"},[n("v-list",{attrs:{dense:"",color:"#323639"}},[t._l(t.itemDetails,(function(e,s){return[n("item-detail",{key:e.key,attrs:{item:e,value:t.share[e.key],baseLink:"shares/"+t.share.id}}),t._v(" "),s+1<t.itemDetails.length?n("v-divider",{key:s}):t._e()]}))],2)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},9356:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const s={props:{item:{type:Object,required:!0},value:{type:[String,Number],required:!1,default:0},baseLink:{type:String,required:!1,default:null}},name:"ItemDetail",computed:{itemLink:function(){return this.item.link?"/".concat(this.baseLink,"/").concat(this.item.link):void 0},disabled:function(){return void 0===this.itemLink}}};const a=(0,n(1900).Z)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-item",{attrs:{dense:"",disabled:t.disabled,to:t.itemLink}},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(t.$t(t.item.key+".title"))}}),t._v(" "),n("v-list-item-subtitle",{domProps:{innerHTML:t._s(t.$t(t.item.key+".description"))}})],1),t._v(" "),n("v-list-item-action",{staticClass:"body-2 font-weight-medium",domProps:{textContent:t._s(t.value)}})],1)}),[],!1,null,null,null).exports},6231:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var s=n(8400);const a={props:{items:{type:Array,required:!0}},name:"TransactionItem",data:function(){return{transactionTypes:s.C_,pageCount:1}}};const r=(0,n(1900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-data-table",{attrs:{"item-key":"id","disable-sort":"","mobile-breakpoint":0,items:t.items,headers:[{text:t.$t("Transaction Date"),value:"date_at",align:"start"},{text:t.$t("Transaction"),value:"type",align:"center"},{text:t.$t("Lots"),value:"lot",align:"center"},{text:t.$t("Transaction Price"),value:"price",align:"center"},{text:t.$t("Transaction Amount"),value:"amount",align:"center"},{text:t.$t("Commission Price"),value:"commission_price",align:"center"},{text:t.$t("Gain/Loss"),value:"gain_loss",align:"center"}],"no-data-text":t.$t("You have not any transaction."),page:t.pageCount},on:{"page-count":function(e){t.pageCount=e}},scopedSlots:t._u([{key:"item.type",fn:function(e){var n=e.item;return[t._v("\n    "+t._s(t.$t(t.transactionTypes[n.type]))+"\n  ")]}},{key:"item.lot",fn:function(e){var n=e.item;return[t._v("\n    "+t._s(t.$n(n.lot,"decimal"))+"\n  ")]}},{key:"item.gain_loss",fn:function(e){var s=e.item;return[n("div",{staticClass:"d-flex align-center justify-end",class:{"red--text":-1==s.sale_gain_trend,"green--text":1==s.sale_gain_trend}},[0==s.type||1==s.type?[t._v("\n        "+t._s(s.sale_gain)+"\n      ")]:t._e(),t._v(" "),2==s.type?[n("v-col",{staticClass:"pr-0 float-right",attrs:{cols:"auto"}},[t._v("\n          "+t._s(s.dividend_gain)+"\n        ")]),t._v(" "),n("v-col",{staticClass:"pr-0 float-right",attrs:{cols:"auto"}},[t._v("\n          ("+t._s(s.dividend)+")\n        ")])]:t._e(),t._v(" "),3==s.type?[n("v-col",{staticClass:"pr-0 float-right",attrs:{cols:"auto"}},[t._v("\n          "+t._s(s.bonus)+"\n        ")]),t._v(" "),n("v-col",{staticClass:"pr-0 float-right",attrs:{cols:"auto"}},[t._v("\n          ("+t._s(s.sale_gain)+")\n        ")])]:t._e(),t._v(" "),4==s.type?[n("v-col",{staticClass:"pr-0 float-right",attrs:{cols:"auto"}},[t._v("\n          "+t._s(s.rights)+"\n        ")]),t._v(" "),n("v-col",{staticClass:"pr-0 float-right",attrs:{cols:"auto"}},[t._v("\n          ("+t._s(s.sale_gain)+")\n        ")])]:t._e(),t._v(" "),5==s.type?[n("v-col",{staticClass:"pr-0 float-right",attrs:{cols:"auto"}},[t._v("\n          "+t._s(s.symbol_code)+" / "+t._s(t.$n(s.exchange_ratio,{style:"decimal",maximumFractionDigits:5}))+"\n        ")])]:t._e(),t._v(" "),6==s.type?[n("v-col",{staticClass:"pr-0 float-right",attrs:{cols:"auto"}},[t._v("\n          "+t._s(s.symbol_code)+" x "+t._s(t.$n(s.exchange_ratio,{style:"decimal",maximumFractionDigits:3}))+"\n        ")]),t._v(" "),n("v-col",{staticClass:"pr-0 float-right",attrs:{cols:"auto"}},[t._v("\n          ("+t._s(s.sale_gain)+")\n        ")])]:t._e()],2)]}}])})}),[],!1,null,null,null).exports}}]);