(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{NyT6:function(e,r,t){"use strict";var n=t("E+oP"),i=t.n(n),o={props:{errors:{type:Object}},name:"FormErrors",data:function(){return{any:null}},watch:{errors:function(e,r){this.any=!i()(e)}}},s=t("KHd+"),a=Object(s.a)(o,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-alert",{attrs:{text:"",dismissible:"",type:"error",border:"left",value:e.any}},e._l(e.errors,(function(r){return t("dl",{key:r.id},e._l(r,(function(r){return t("dd",{key:r.id},[e._v(e._s(r))])})),0)})),0)}),[],!1,null,null,null);r.a=a.exports},YvBu:function(e,r,t){"use strict";t.r(r);var n=t("L2JU"),i=t("PmmK"),o=t("48Ln"),s=t("zOxG"),a=t("nFO3"),c=t("NyT6");function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function u(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function d(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(t.push(s.value),!r||t.length!==r);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var f={props:{shareId:{type:Number,required:!1},code:{type:String,required:!1},commission:{type:Number,required:!1}},name:"CreateTransaction",mixins:[s.a,a.a],components:{FormErrors:c.a},data:function(){return{waitFor:"store_transaction",form:{share_id:this.shareId,type:i.c.Buying,date_at:null,lot:null,price:null,commission:this.commission,dividend_gain:null},date:null,valid:!0,menu:!1,symbolCode:this.code,priceCurrency:null,dividendGainCurrency:null}},computed:{transactionTypes:function(){for(var e=[],r=0,t=Object.entries(i.c);r<t.length;r++){var n=d(t[r],2),o=n[0],s=n[1];e.push({id:s,label:this.$t(o)})}return e}},watch:{date:function(e){this.form.date_at=this.formatDate(e)},priceCurrency:function(e){this.form.price=this.$parseCurrency(e)},dividendGainCurrency:function(e){this.form.dividend_gain=this.$parseCurrency(e)}},methods:function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(t,!0).forEach((function(r){u(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(t).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},Object(n.b)(["storeTransaction"]),{formatDate:function(e){if(!e)return null;var r=d(e.split("-"),3),t=r[0],n=r[1],i=r[2];return"".concat(i,".").concat(n,".").concat(t)},goBack:function(){window.history.length>1?this.$router.go(-1):this.$router.push({name:"Home"})},submit:function(){var e=this;this.$refs.form.validate()?(this.startLoading(),this.storeTransaction(this.form).then((function(r){Object(o.b)(r),e.clearErrors(),e.goBack()})).catch((function(r){e.syncErrors(r)})).finally((function(){e.stopLoading()}))):this.focusFirstErrorInput()},allowedDates:function(e){return 0!==new Date(e).getDay()&&6!==new Date(e).getDay()&&new Date(e)<=new Date},saveToLocalStorage:function(){var e={share_id:this.shareId,code:this.code,commission:this.commission};localStorage.setItem("transactionData",JSON.stringify(e))},readFromLocalStorage:function(){var e=JSON.parse(localStorage.getItem("transactionData"));this.form.share_id=e.share_id,this.form.commission=e.commission,this.symbolCode=e.code}}),created:function(){void 0===this.shareId?this.readFromLocalStorage():this.saveToLocalStorage()}},m=t("KHd+"),p=Object(m.a)(f,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-row",{attrs:{align:"center",justify:"center"}},[t("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[t("v-card",[t("v-toolbar",{staticClass:"pl-2",attrs:{flat:""}},[t("v-toolbar-title",[e._v("\n          "+e._s(e.symbolCode)+"\n          "),t("v-icon",{attrs:{small:""}},[e._v("keyboard_arrow_right")]),e._v("\n          "+e._s(e.$t("Add Transaction"))+"\n        ")],1)],1),e._v(" "),t("v-card-text",[t("v-form",{ref:"form",attrs:{"lazy-validation":""},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.submit(r)},keydown:function(r){return e.clearError(r.target.name)}},model:{value:e.valid,callback:function(r){e.valid=r},expression:"valid"}},[t("form-errors",{attrs:{errors:e.errors}}),e._v(" "),t("v-input",{ref:"share_id",attrs:{type:"hidden",name:"share_id",id:"share_id",readonly:"","hide-details":"",dense:""},model:{value:e.form.share_id,callback:function(r){e.$set(e.form,"share_id",r)},expression:"form.share_id"}}),e._v(" "),t("v-select",{ref:"type",attrs:{name:"type",id:"type",autofocus:"","single-line":"",outlined:"",clearable:"","prepend-inner-icon":"format_list_bulleted",disabled:e.isLoading,items:e.transactionTypes,label:e.$t("Select Transaction"),rules:[e.rules.required],"error-messages":e.getError("type"),"item-text":"label","item-value":"id","menu-props":"bottom"},model:{value:e.form.type,callback:function(r){e.$set(e.form,"type",r)},expression:"form.type"}}),e._v(" "),t("v-menu",{ref:"menu",attrs:{"offset-y":"","min-width":"290px",transition:"scale-transition","close-on-content-click":!1,"nudge-right":40,"return-value":e.form.date_at},on:{"update:returnValue":function(r){return e.$set(e.form,"date_at",r)},"update:return-value":function(r){return e.$set(e.form,"date_at",r)}},scopedSlots:e._u([{key:"activator",fn:function(r){var n=r.on;return[t("v-text-field",e._g({ref:"date_at",attrs:{name:"date_at",id:"date_at",readonly:"",outlined:"",clearable:"","prepend-inner-icon":"calendar_today",disabled:e.isLoading,label:e.$t("Select Date"),rules:[e.rules.required],"error-messages":e.getError("date_at")},model:{value:e.form.date_at,callback:function(r){e.$set(e.form,"date_at",r)},expression:"form.date_at"}},n))]}}]),model:{value:e.menu,callback:function(r){e.menu=r},expression:"menu"}},[e._v(" "),t("v-date-picker",{attrs:{"no-title":"",scrollable:"","allowed-dates":e.allowedDates,"first-day-of-week":1},model:{value:e.date,callback:function(r){e.date=r},expression:"date"}},[t("v-spacer"),e._v(" "),t("v-btn",{staticClass:"btn-close",on:{click:function(r){e.menu=!1}}},[e._v(e._s(e.$t("Close")))]),e._v(" "),t("v-btn",{staticClass:"btn-action",on:{click:function(r){return e.$refs.menu.save(e.form.date_at)}}},[e._v(e._s(e.$t("Ok")))])],1)],1),e._v(" "),t("v-text-field",{ref:"lot",attrs:{type:"number",name:"lot",id:"lot",outlined:"",clearable:"",step:"1","prepend-inner-icon":"format_list_numbered",disabled:e.isLoading,label:e.$t("Enter Share Amount"),rules:[e.rules.required],"error-messages":e.getError("lot"),hint:3==this.form.type?e.$t("You must write your bonus shares."):4==this.form.type?e.$t("You must write your rights shares."):""},model:{value:e.form.lot,callback:function(r){e.$set(e.form,"lot",r)},expression:"form.lot"}}),e._v(" "),0==this.form.type||1==this.form.type||2==this.form.type?t("v-text-field",{directives:[{name:"currency",rawName:"v-currency"}],ref:"price",attrs:{type:"text",name:"price",id:"price",outlined:"",clearable:"","prepend-inner-icon":"money",disabled:e.isLoading,label:e.$t("Enter Transaction Price"),rules:[e.rules.required],"error-messages":e.getError("price")},model:{value:e.priceCurrency,callback:function(r){e.priceCurrency=r},expression:"priceCurrency"}}):e._e(),e._v(" "),0==this.form.type||1==this.form.type?t("v-text-field",{ref:"commission",attrs:{type:"number",name:"commission",id:"commission",outlined:"",clearable:"",step:"0.0001","prepend-inner-icon":"donut_large",disabled:e.isLoading,label:e.$t("Enter Commission Rate"),rules:[e.rules.required],"error-messages":e.getError("commission"),hint:e.$t("For example; Garanti Bank: 0,188")},model:{value:e.form.commission,callback:function(r){e.$set(e.form,"commission",r)},expression:"form.commission"}}):e._e(),e._v(" "),2==this.form.type?t("v-text-field",{directives:[{name:"currency",rawName:"v-currency"}],ref:"dividend_gain",attrs:{type:"text",name:"dividend_gain",id:"dividend_gain",outlined:"",clearable:"","prepend-inner-icon":"money",disabled:e.isLoading,label:e.$t("Enter Dividend Gain Price"),rules:[e.rules.required],"error-messages":e.getError("dividend_gain")},model:{value:e.dividendGainCurrency,callback:function(r){e.dividendGainCurrency=r},expression:"dividendGainCurrency"}}):e._e()],1)],1),e._v(" "),t("v-divider"),e._v(" "),t("v-card-actions",{staticClass:"pa-4"},[t("v-spacer"),e._v(" "),t("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],attrs:{indeterminate:""}}),e._v(" "),t("v-btn",{staticClass:"btn-close",attrs:{disabled:e.isLoading},on:{click:function(r){return e.$router.go(-1)}}},[e._v("\n          "+e._s(e.$t("Close"))+"\n        ")]),e._v(" "),t("v-btn",{staticClass:"btn-action",attrs:{disabled:e.isLoading},on:{click:e.submit}},[e._v("\n          "+e._s(e.$t("Create"))+"\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);r.default=p.exports},nFO3:function(e,r,t){"use strict";var n=t("L2JU");function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}r.a={data:function(){return{waitFor:""}},computed:function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(t,!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(t).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},Object(n.c)(["isInLoading"]),{isLoading:function(){return this.isInLoading(this.waitFor)}}),methods:{startLoading:function(){this.$store.dispatch("startLoadingBy",this.waitFor)},stopLoading:function(){this.$store.dispatch("stopLoadingBy",this.waitFor)}}}},zOxG:function(e,r,t){"use strict";var n=t("PP4N"),i=t.n(n),o=t("dtHD"),s=t("g6NE");function a(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(t.push(s.value),!r||t.length!==r);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}r.a={data:function(){var e=this;return{errors:{},rules:{required:function(r){return!!r||0===r||e.$t("rules.required")},email:function(r){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(r)||e.$t("rules.email")},confirmed:function(r){return function(t){return r==t||e.$t("rules.confirmed")}},gte:function(r){return function(t){return t&&t.length>=r||e.$t("rules.gte",{length:r})}}}}},methods:{syncErrors:function(e){var r=this;if(void 0!==e)if(void 0!==e.response&&e.hasOwnProperty("response")&&e.response.hasOwnProperty("data")){if(400===e.response.status||401===e.response.status?(s.a.commit("LOGGED_OUT"),o.a.push({name:"Login"})):403===e.response.status?o.a.push({name:"Forbidden"}):404===e.response.status&&o.a.push({name:"NotFound"}),e.response.data.hasOwnProperty("errors")){this.errors=Object.assign({},e.response.data.errors);for(var t=0,n=Object.entries(this.errors);t<n.length;t++){var i=n[t];void 0!==this.$refs[i]&&(this.$refs[i].valid=!1)}setTimeout((function(){r.focusFirstErrorInput()}),500)}}else console.log(e)},clearErrors:function(){this.errors={}},clearError:function(e){this.hasErrors(e)&&(i()(this.errors,e),this.errors=Object.assign({},this.errors,this.errors),this.$refs[e].valid=!0)},focusFirstErrorInput:function(){for(var e=0,r=Object.entries(this.form);e<r.length;e++){var t=a(r[e],2),n=t[0];t[1];if(void 0!==this.$refs[n]&&!this.$refs[n].valid){this.$refs[n].focus();break}}},hasErrors:function(e){return this.errors.hasOwnProperty(e)},getError:function(e){return this.hasErrors(e)?this.errors[e][0]:null},getErrors:function(e){return this.hasErrors(e)?this.errors[e]:null}}}}}]);